<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basha Pawaar Pothe</title>
    <link rel="stylesheet" href="Assests/css/bootstrap.min.css">
    <link rel="stylesheet" href="Assests/css/style.css">
    <!-- for icons -->
    <link rel="stylesheet" href="Assests/icons/font/bootstrap-icons.css">
    <!-- for responsive -->
    <link rel="stylesheet" href="Assests/css/responsive.css">
  
</head>
<body>

    <!-- Navbar-Start -->

    <nav class="navbar navbar-expand-lg"  style="background-color: #ccd9ff">
        <div class="container-fluid">
          <a class="navbar-brand fw-bold" href="#">BashaPawaarPothe</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="#">About Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="contact.html">Contact Us</a>
              </li>
            </ul>
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link active" href="register.html"><i class="bi bi-person-fill"></i> Register</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" href="login.html"><i class="bi bi-box-arrow-in-right"></i> Login</a>
                </li>
              </ul>
           
          </div>
        </div>
      </nav>

    <!-- Navbar-End -->

    <!-- Teenant-RegisterForm-Start -->

      <div class="teenant-registerform-area mt-5">
        <h3>Teenant Register</h3>
      </div>
      <div class="register-areas">
        <div class="register-form">
            <form class="row g-3 needs-validation" novalidate onsubmit="submitForm(event)">
                <div class="col-md-12">
                  <label for="fullName" class="form-label">Your Full Name</label>
                  <input type="text" class="form-control" id="fullName" value="" required>
                  <div class="valid-feedback">
                    Looks good!
                  </div>
                </div>
                <div class="col-md-12">
                    <label for="email" class="form-label">Your Email</label>
                    <input type="text" class="form-control" id="email" value="" required>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                  </div>
                <div class="col-md-12">
                  <label for="password" class="form-label">Your Password</label>
                  <input type="password" class="form-control" id="password" value="" placeholder="" required>
                  <div class="valid-feedback">
                    Looks good!
                  </div>
                </div>
                <div class="col-md-12">
                    <label for="phoneNumber" class="form-label">Your Phone No</label>
                    <input type="text" class="form-control" id="phoneNumber" value="" required>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                </div>
                <div class="col-md-12">
                    <label for="address" class="form-label">Your Address</label>
                  
                    <select class="form-select" id="address" name="address" required>
                      <option value="" disabled selected>Select your address</option>
                      <option value="Azimpur">Azimpur</option>
                      <option value="Lalbagh">Lalbagh</option>
                      <option value="Mirpur">Mirpur</option>
                      <option value="Uttara">Uttara</option>
                      <option value="Shamoly">Shamoly</option>
                  
                    </select>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                </div>
                
             
                <div class="col-md-12">
                  <button class="btn btn-primary col-md-12" type="submit" onclick="submitForm()">Register</button>
                </div>
              </form>
        </div>
        <div class="msg">
            <p>Register as a <a href="ownerRegisterform.html"> Owner?</a></p>
        </div>
    </div>


     

    <!-- Teenant-RegisterForm-End -->


    
    <script src="Assests/js/bootstrap.bundle.js"></script>
    <script src="Assests/js/main.js"></script>

    
    <script>
  //     (() => {
  //      'use strict'

  //      // Fetch all the forms we want to apply custom Bootstrap validation styles to
  //      const forms = document.querySelectorAll('.needs-validation')

  //      // Loop over them and prevent submission
  //      Array.from(forms).forEach(form => {
  //          form.addEventListener('submit', event => {
  //              if (!form.checkValidity()) {
  //                  event.preventDefault()
  //                  event.stopPropagation()
  //              }

  //              form.classList.add('was-validated')
  //          }, false)
  //      })
  //  })()
   
       function submitForm() {
          event.preventDefault(); // Prevent the default form submission behavior
           console.log('Button clicked!');
           var fullName = document.getElementById('fullName').value;
           var email = document.getElementById('email').value;
           var password = document.getElementById('password').value;
           var phoneNumber = document.getElementById('phoneNumber').value;
           var address = document.getElementById('address').value;

           if (!fullName || !email || !password || !phoneNumber || !address) {
                alert('Please fill in all fields before submitting.');
                return; // Stop the function if any field is empty
            }

           // Create a FormData object
           var formData = new FormData(); //A FormData object is created
           formData.append('fullName', fullName);  //key,values pair
           formData.append('email', email);
           formData.append('password', password);
           formData.append('phoneNumber', phoneNumber);
           formData.append('address', address);

           // Convert FormData to JSON
           var jsonData = {};
           for (var pair of formData.entries()) {
               jsonData[pair[0]] = pair[1];
           }

           // Log the JSON data
           console.log('JSON data:', jsonData);

           // Convert JSON to FormData if needed (optional)
           // var convertedFormData = new FormData();
           // Object.entries(jsonData).forEach(([key, value]) => convertedFormData.append(key, value));

           // API Endpoint and Request Configuration:
           const apiUrl = 'https://localhost:7195/api/TeenantRegestration/PostTeenant';


           fetch(apiUrl, {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify(jsonData),
          })
          .then(response => {
              if (response.ok) {
                  alert('Registered successfully!!! Now you can LogIn');
                  return response.text();
              } else {
                  return response.text().then(errorMessage => {
                      if (errorMessage.includes("Email or password already exists")) {
                          alert(errorMessage); // Display the specific error message
                      } else {
                          alert('Email or Phone number already exist!!. Please try another email or phone number.'); // Display a generic error message
                      }
                      throw new Error(`HTTP error! Status: ${response.status}`);
                  });
              }
          })
          .catch(error => {
              console.error('Error:', error);
          });

       
 

       }







   </script>
</body>
</html>